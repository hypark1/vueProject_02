{"remainingRequest":"/Users/hypark/project/cdp-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hypark/project/cdp-admin/src/views/media/List.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hypark/project/cdp-admin/src/views/media/List.vue","mtime":1582004905814},{"path":"/Users/hypark/project/cdp-admin/node_modules/cache-loader/dist/cjs.js","mtime":1573115876135},{"path":"/Users/hypark/project/cdp-admin/node_modules/babel-loader/lib/index.js","mtime":1573115869688},{"path":"/Users/hypark/project/cdp-admin/node_modules/vuetify-loader/lib/loader.js","mtime":1573794163850},{"path":"/Users/hypark/project/cdp-admin/node_modules/cache-loader/dist/cjs.js","mtime":1573115876135},{"path":"/Users/hypark/project/cdp-admin/node_modules/vue-loader/lib/index.js","mtime":1573437292219}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JwoKZXhwb3J0IGRlZmF1bHQgewogIGNyZWF0ZWQgKCkgewogICAgdGhpcy5yZUZyZXNoKCkKICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgcmVzcG9uc2U6IHsKICAgICAgICBsaXN0OiBudWxsCiAgICAgIH0sCiAgICAgIGtleXdvcmQ6IG51bGwsCiAgICAgIHZNb2RlbDogewogICAgICAgIHBlcjogMjAsCiAgICAgICAgcGFnZTogMSwKICAgICAgICBvcmRlcmJ5OiAnY3JlYXRlZCcsCiAgICAgICAgZGlyZWN0aW9uOiAnZGVzYycsCiAgICAgICAgd2hlcmU6ICduYW1lJwogICAgICB9LAogICAgICBjb25maWc6IHsKICAgICAgICBvcmRlcmJ5T3B0aW9uczogWwogICAgICAgICAgeyB2YWx1ZTogJ2NyZWF0ZWQnLCB0ZXh0OiAn64iE7KCBIOunpOy2nCcgfSwKICAgICAgICAgIHsgdmFsdWU6ICduYW1lJywgdGV4dDogJ+yblO2Pieq3oCDrp6TstpwnIH0sCiAgICAgICAgICB7IHZhbHVlOiAnY29tbWlzc2lvbicsIHRleHQ6ICftj4nqt6Ag7J207J217JyoJyB9LAogICAgICAgICAgeyB2YWx1ZTogJ25hbWUxJywgdGV4dDogJ+yblO2Pieq3oCDtjpjsnbTsp4Ag67ewJyB9LAogICAgICAgICAgeyB2YWx1ZTogJ2NvbW1pc3Npb24xJywgdGV4dDogJ0NUUicgfSwKICAgICAgICAgIHsgdmFsdWU6ICdjcmVhdGVkMScsIHRleHQ6ICdSUE0nIH0KICAgICAgICBdLAogICAgICAgIGhlYWRlcnM6IFsKICAgICAgICAgIHsgdGV4dDogJ05vJywgdmFsdWU6ICdubycsIGFsaWduOiAnY2VudGVyJyB9LAogICAgICAgICAgeyB0ZXh0OiAn66ek7LK066qFJywgdmFsdWU6ICdrb3JfbmFtZScsIGFsaWduOiAnY2VudGVyJyB9LAogICAgICAgICAgeyB0ZXh0OiAn7Zi47Iqk7Yq466qFJywgdmFsdWU6ICduYW1lJywgYWxpZ246ICdjZW50ZXInIH0sCiAgICAgICAgICB7IHRleHQ6ICfsnbTrpoQnLCB2YWx1ZTogJ3VzZXIubmFtZScsIGFsaWduOiAnY2VudGVyJyB9LAogICAgICAgICAgeyB0ZXh0OiAn6rOE7KCVJywgdmFsdWU6ICd1c2VyLmVtYWlsJywgYWxpZ246ICdjZW50ZXInIH0sCiAgICAgICAgXQogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsneGh0dHAnXSksCiAgICBzbmFjayAodHlwZSwgdmFsKSB7CiAgICAgIHRoaXMudk1vZGVsLmVycm9yTWVzc2FnZSA9IHZhbAogICAgICB0aGlzLnZNb2RlbC5zbmFja2JhclR5cGUgPSB0eXBlCiAgICAgIHRoaXMudk1vZGVsLnNuYWNrYmFyID0gdHJ1ZQogICAgfSwKICAgIHJlRnJlc2ggKCkgewogICAgICBsZXQgc2VuZCA9IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIG9yZGVyYnk6ICdjcmVhdGVkJwogICAgICB9CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5wYWdlKSB7CiAgICAgICAgc2VuZC5wYWdlID0gdGhpcy4kcm91dGUucXVlcnkucGFnZQogICAgICAgIHRoaXMudk1vZGVsLnBhZ2UgPSBOdW1iZXIodGhpcy4kcm91dGUucXVlcnkucGFnZSkKICAgICAgfQogICAgICBpZiAodGhpcy4kcm91dGUucXVlcnkub3JkZXJieSkgewogICAgICAgIHNlbmQub3JkZXJieSA9IHRoaXMuJHJvdXRlLnF1ZXJ5Lm9yZGVyYnkKICAgICAgICB0aGlzLnZNb2RlbC5vcmRlcmJ5ID0gdGhpcy4kcm91dGUucXVlcnkub3JkZXJieQogICAgICB9CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5rZXl3b3JkKSB7CiAgICAgICAgc2VuZC5rZXl3b3JkID0gdGhpcy4kcm91dGUucXVlcnkua2V5d29yZAogICAgICAgIHRoaXMua2V5d29yZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmtleXdvcmQKICAgICAgfQogICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7IG5hbWU6ICdtZWRpYUxpc3QnLCBxdWVyeTogc2VuZCB9KQogICAgICB0aGlzLm1lZGlhTGlzdCgpCiAgICB9LAogICAgdGFibGVSb3dDbGljayAodikgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICdtZWRpYVZpZXcnLCBwYXJhbXM6IHsgbWVkaWFfaWQ6IHYua2V5IH0gfSkKICAgIH0sCiAgICBwYWdpbmF0aW9uQ2xpY2sgKHBhZ2UpIHsKICAgICAgdGhpcy52TW9kZWwucGFnZSA9IHBhZ2UKICAgICAgbGV0IHNlbmQgPSB7CiAgICAgICAgcGFnZTogcGFnZSwKICAgICAgICBvcmRlcmJ5OiB0aGlzLiRyb3V0ZS5xdWVyeS5vcmRlcmJ5CiAgICAgIH0KICAgICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LmtleXdvcmQpIHsKICAgICAgICBzZW5kLmtleXdvcmQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5rZXl3b3JkCiAgICAgIH0KICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoeyBuYW1lOiAnbWVkaWFMaXN0JywgcXVlcnk6IHNlbmQgfSkKICAgICAgdGhpcy5tZWRpYUxpc3QoKQogICAgfSwKICAgIHN1Ym1pdEtleXdvcmQgKCkgewogICAgICBsZXQgc2VuZCA9IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIG9yZGVyYnk6IHRoaXMudk1vZGVsLm9yZGVyYnkKICAgICAgfQogICAgICBpZiAodGhpcy5rZXl3b3JkKSB7CiAgICAgICAgc2VuZC5rZXl3b3JkID0gdGhpcy5rZXl3b3JkCiAgICAgIH0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAnbWVkaWFMaXN0JywgcXVlcnk6IHNlbmQgfSkKICAgICAgdGhpcy52TW9kZWwucGFnZSA9IDEKICAgICAgdGhpcy5tZWRpYUxpc3QoKQogICAgfSwKICAgIG51bVJlcGxhY2UgKHZhbCkgewogICAgICBsZXQgbnVtID0gdmFsICsgJycKICAgICAgbnVtID0gbnVtLnNwbGl0KCcuJykKICAgICAgbGV0IHJlc3VsdCA9IG51bVswXS5yZXBsYWNlKC9cRC9nLCAnJykucmVwbGFjZSgvXEIoPz0oXGR7M30pKyg/IVxkKSkvZywgJywnKQogICAgICBpZiAobnVtWzFdKSB7CiAgICAgICAgcmVzdWx0ICs9ICcuJyArIG51bVsxXQogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQKICAgIH0sCiAgICBtZWRpYUxpc3QgKCkgewogICAgICBsZXQgc2VuZCA9IHsKICAgICAgICBwZXI6IHRoaXMudk1vZGVsLnBlciwKICAgICAgICBwYWdlOiB0aGlzLiRyb3V0ZS5xdWVyeS5wYWdlLAogICAgICAgIG9yZGVyYnk6IHRoaXMuJHJvdXRlLnF1ZXJ5Lm9yZGVyYnksCiAgICAgICAgZGlyZWN0aW9uOiB0aGlzLnZNb2RlbC5kaXJlY3Rpb24KICAgICAgfQogICAgICBpZiAodGhpcy4kcm91dGUucXVlcnkua2V5d29yZCkgewogICAgICAgIHNlbmQua2V5d29yZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmtleXdvcmQKICAgICAgICBzZW5kLndoZXJlID0gdGhpcy52TW9kZWwud2hlcmUKICAgICAgfQogICAgICB0aGlzLnhodHRwKHsKICAgICAgICB1cmw6ICcvbWVkaWEnLAogICAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgICAgcGFyYW1zOiBzZW5kCiAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLnJlc3BvbnNlLmxpc3QgPSByZXNwb25zZS5kYXRhLmRhdGEKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgIGlmIChlcnJvci5tZXNzYWdlID09PSAnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSA0MDEnKSB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7ICduYW1lJzogJ1VzZXJMb2dpbicgfSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zbmFjaygnd2FybmluZycsICfqtIDrpqzsnpDsl5Dqsowg66y47J2YIOuwlOuejeuLiOuLpC4nKQogICAgICAgIH0KICAgICAgfSkKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICByZXN1bHRNZWRpYSAoKSB7CiAgICAgIGlmICh0aGlzLnJlc3BvbnNlLmxpc3QpIHsKICAgICAgICByZXR1cm4gdGhpcy5yZXNwb25zZS5saXN0CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBrZXl3b3JkOiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIGlmICh2YWwgPT09ICcnKSB7CiAgICAgICAgdGhpcy5zdWJtaXRLZXl3b3JkKCkKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/views/media","sourcesContent":["<template>\n  <v-container\n    id=\"mediaList\"\n    fluid\n    tag=\"section\">\n    <v-row\n            align=\"center\"\n            justify=\"center\">\n      <v-col cols=\"12\">\n        <base-material-card\n                color=\"green\">\n          <template v-slot:heading>\n            <h1 class=\"display-2 font-weight-regular\">\n              매체 리스트\n            </h1>\n          </template>\n          <v-card-text>\n            <v-row justify=\"space-between\" align=\"center\">\n              <v-col cols=\"2\">\n                <!--<v-select\n                        :items=\"config.orderbyOptions\"\n                        v-model=\"vModel.orderby\"\n                        label=\"정렬\"\n                        color=\"secondary\"\n                        @change=\"submitKeyword\"/>-->\n              </v-col>\n              <v-col cols=\"2\">\n                <form @submit.prevent=\"submitKeyword\">\n                  <v-text-field\n                        v-model=\"keyword\"\n                        append-icon=\"mdi-magnify\"\n                        class=\"ml-auto pt-0\"\n                        label=\"Search\"\n                        color=\"secondary\"\n                        hide-details\n                        single-line />\n                </form>\n              </v-col>\n            </v-row>\n\n            <v-divider class=\"mt-3\" />\n            <template v-if=\"resultMedia\">\n              <v-data-table\n                      :headers=\"config.headers\"\n                      :items=\"resultMedia.media\"\n                      :items-per-page=\"Number(resultMedia.meta.perPage)\"\n                      item-key=\"key\"\n                      no-data-text=\"매체가 없습니다.\"\n                      @click:row=\"tableRowClick\"\n                      hide-default-footer>\n                <template v-slot:item=\"{ item, index }\">\n                  <tr @click=\"tableRowClick(item)\">\n                    <td class=\"text-center\" style=\"width:200px;\">{{index +1}}</td>\n                    <td class=\"text-center\">{{ item.kor_name }}</td>\n                    <td class=\"text-center\">{{ item.name }}</td>\n                    <td class=\"text-center\">\n                      <template v-if=\"item.user\">\n                        {{item.user.name}}\n                      </template>\n                      <template v-else>-</template>\n                    </td>\n                    <td class=\"text-center\">\n                      <template v-if=\"item.user\">\n                        {{item.user.email}}\n                      </template>\n                      <template v-else>-</template>\n                    </td>\n                  </tr>\n                </template>\n              </v-data-table>\n              <v-pagination\n                      v-model=\"vModel.page\"\n                      :length=\"resultMedia.meta.lastPage\"\n                      :total-visible=\"10\"\n                      @input=\"paginationClick\"\n                      circle\n                      class=\"justify-center mt-5\"\n                      next-icon=\"mdi-menu-right\"\n                      prev-icon=\"mdi-menu-left\"/>\n            </template>\n          </v-card-text>\n        </base-material-card>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport { mapActions } from 'vuex'\n\nexport default {\n  created () {\n    this.reFresh()\n  },\n  data () {\n    return {\n      response: {\n        list: null\n      },\n      keyword: null,\n      vModel: {\n        per: 20,\n        page: 1,\n        orderby: 'created',\n        direction: 'desc',\n        where: 'name'\n      },\n      config: {\n        orderbyOptions: [\n          { value: 'created', text: '누적 매출' },\n          { value: 'name', text: '월평균 매출' },\n          { value: 'commission', text: '평균 이익율' },\n          { value: 'name1', text: '월평균 페이지 뷰' },\n          { value: 'commission1', text: 'CTR' },\n          { value: 'created1', text: 'RPM' }\n        ],\n        headers: [\n          { text: 'No', value: 'no', align: 'center' },\n          { text: '매체명', value: 'kor_name', align: 'center' },\n          { text: '호스트명', value: 'name', align: 'center' },\n          { text: '이름', value: 'user.name', align: 'center' },\n          { text: '계정', value: 'user.email', align: 'center' },\n        ]\n      }\n    }\n  },\n  methods: {\n    ...mapActions(['xhttp']),\n    snack (type, val) {\n      this.vModel.errorMessage = val\n      this.vModel.snackbarType = type\n      this.vModel.snackbar = true\n    },\n    reFresh () {\n      let send = {\n        page: 1,\n        orderby: 'created'\n      }\n      if (this.$route.query.page) {\n        send.page = this.$route.query.page\n        this.vModel.page = Number(this.$route.query.page)\n      }\n      if (this.$route.query.orderby) {\n        send.orderby = this.$route.query.orderby\n        this.vModel.orderby = this.$route.query.orderby\n      }\n      if (this.$route.query.keyword) {\n        send.keyword = this.$route.query.keyword\n        this.keyword = this.$route.query.keyword\n      }\n      this.$router.replace({ name: 'mediaList', query: send })\n      this.mediaList()\n    },\n    tableRowClick (v) {\n      this.$router.push({ name: 'mediaView', params: { media_id: v.key } })\n    },\n    paginationClick (page) {\n      this.vModel.page = page\n      let send = {\n        page: page,\n        orderby: this.$route.query.orderby\n      }\n      if (this.$route.query.keyword) {\n        send.keyword = this.$route.query.keyword\n      }\n      this.$router.replace({ name: 'mediaList', query: send })\n      this.mediaList()\n    },\n    submitKeyword () {\n      let send = {\n        page: 1,\n        orderby: this.vModel.orderby\n      }\n      if (this.keyword) {\n        send.keyword = this.keyword\n      }\n      this.$router.push({ name: 'mediaList', query: send })\n      this.vModel.page = 1\n      this.mediaList()\n    },\n    numReplace (val) {\n      let num = val + ''\n      num = num.split('.')\n      let result = num[0].replace(/\\D/g, '').replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n      if (num[1]) {\n        result += '.' + num[1]\n      }\n      return result\n    },\n    mediaList () {\n      let send = {\n        per: this.vModel.per,\n        page: this.$route.query.page,\n        orderby: this.$route.query.orderby,\n        direction: this.vModel.direction\n      }\n      if (this.$route.query.keyword) {\n        send.keyword = this.$route.query.keyword\n        send.where = this.vModel.where\n      }\n      this.xhttp({\n        url: '/media',\n        method: 'get',\n        params: send\n      }).then((response) => {\n        if (response.status === 200) {\n          this.response.list = response.data.data\n        }\n      }).catch((error) => {\n        if (error.message === 'Request failed with status code 401') {\n          this.$router.push({ 'name': 'UserLogin' })\n        } else {\n          this.snack('warning', '관리자에게 문의 바랍니다.')\n        }\n      })\n    }\n  },\n  computed: {\n    resultMedia () {\n      if (this.response.list) {\n        return this.response.list\n      } else {\n        return false\n      }\n    }\n  },\n  watch: {\n    keyword: function (val) {\n      if (val === '') {\n        this.submitKeyword()\n      }\n    }\n  }\n}\n</script>\n"]}]}